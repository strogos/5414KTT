/*
 * Timer.cpp
 *
 *  Created on: Apr 23, 2015
 *      Author: bengteh
 */



#include "Timer.h"
#include "ace/Log_Msg.h"

Timer::Timer()
{

}


int Timer::handle_timeout (const ACE_Time_Value &tv,const void *arg)
	{
		long current_count = long (arg);
		ACE_ASSERT (current_count == count_);
		ACE_DEBUG ((LM_DEBUG, "%d: Timer #%d timed out at %d!\n",
					count_, current_count, tv.sec()));
		//Increment count
		count_ ++;
		//Make sure assertion doesnâ€™t fail for missing 5th timer.
		if (count_ ==5)
			count_++;

		//If all timers done then set done flag
		if (current_count == NUMBER_TIMERS_ - 1)
			done_ = 1;
		//Keep yourself registered with the Reactor.
		return 0;
		}

/*statics*/
int Timer::done_;
int Timer::count_;
