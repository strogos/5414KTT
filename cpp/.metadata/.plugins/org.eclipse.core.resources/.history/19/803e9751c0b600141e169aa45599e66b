//============================================================================
// Name        : main.cpp
// Author      : 
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include "IPC_Server.h"
#include "IPC_Client.h"

#include <pthread.h>

#include <iostream>
using namespace std;

void  *thread_worker1(void* voidPtr)
{
		IPC_Server::Server srv(42000);
		srv.accept_data();
		srv.~Server();

	return NULL;
}

void  *thread_worker2(void* voidPtr)
{
		IPC_Client_Broadcast::Client client(42000);
		client.send_data("shit");
		client.~Client();

	return NULL;
}

int main()
{
	pthread_t thread1,thread2;
	pthread_create(thread1&,NULL,thread_worker1,NULL);

	/* wait for the second thread to finish */
	if(pthread_join(inc_x_thread, NULL))
	{
		cout<<"Error joining thread\n";
		return -1;
	}
	return 0;
}
